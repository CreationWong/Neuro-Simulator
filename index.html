<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neuro-Simulator Live</title>
    <link rel="stylesheet" href="/src/style.css" />
  </head>
  <body>
    <!-- Twitch 风格页眉 (已在上次提交中修改) -->
    <header id="twitch-header">
      <div class="top-nav-left">
        <a href="/" class="twitch-logo-link" aria-label="Twitch 主页">
          <figure class="twitch-logo-container">
            <svg class="twitch-logo-svg" overflow="visible" width="40px" height="40px" version="1.1" viewBox="0 0 40 40" x="0px" y="0px">
              <g>
                <polygon points="13 8 8 13 8 31 14 31 14 36 19 31 23 31 32 22 32 8" class="logo-body"></polygon>
                <polygon points="26 25 30 21 30 10 14 10 14 25 18 25 18 29 22 25" class="logo-face"></polygon>
                <g class="logo-eyes">
                  <path d="M20,14 L22,14 L22,20 L20,20 L20,14 Z M27,14 L27,20 L25,20 L25,14 L27,14 Z" class="logo-eye-path"></path>
                </g>
              </g>
            </svg>
          </figure>
        </a>
        <div class="nav-links-main">
          <a class="nav-link" href="#">
            <p>正在关注</p>
            <div class="nav-link-icon-wrapper">
              <svg width="20px" height="20px" version="1.1" viewBox="0 0 20 20" x="0px" y="0px"><path d="M9.171 4.171A4 4 0 0 0 6.343 3H6a4 4 0 0 0-4 4v.343a4 4 0 0 0 1.172 2.829L10 17l6.828-6.828A4 4 0 0 0 18 7.343V7a4 4 0 0 0-4-4h-.343a4 4 0 0 0-2.829 1.172L10 5l-.829-.829zm.829 10 5.414-5.414A2 2 0 0 0 16 7.343V7a2 2 0 0 0-2-2h-.343a2 2 0 0 0-1.414.586L10 7.828 7.757 5.586A2 2 0 0 0 6.343 5H6a2 2 0 0 0-2 2v.343a2 2 0 0 0 .586 1.414L10 14.172z" fill-rule="evenodd"></path></svg>
            </div>
          </a>
          <a class="nav-link" href="#">
            <p>浏览</p>
            <div class="nav-link-icon-wrapper">
              <svg width="20px" height="20px" version="1.1" viewBox="0 0 20 20" x="0px" y="0px"><g><path d="M5 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2V4h8a2 2 0 0 0-2-2H5z"></path><path d="M7 8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H9a2 2 0 0 1-2-2V8zm2 0h6v8H9V8z" fill-rule="evenodd"></path></g></svg>
            </div>
          </a>
        </div>
      </div>

      <div class="top-nav-center">
        <div class="search-container">
          <input type="search" class="search-input" placeholder="搜索" />
          <button class="search-button" aria-label="搜索按钮">
            <svg width="20" height="20" viewBox="0 0 20 20" focusable="false" aria-hidden="true" role="presentation"><path d="M13.192 14.606a7 7 0 1 1 1.414-1.414l3.101 3.1-1.414 1.415-3.1-3.1zM14 9A5 5 0 1 1 4 9a5 5 0 0 1 10 0z" fill-rule="evenodd"></path></svg>
          </button>
        </div>
      </div>

      <div class="top-nav-right">
        <button class="nav-icon-button" aria-label="Prime 优惠">
          <svg width="20" height="20" viewBox="0 0 20 20" focusable="false" aria-hidden="true" role="presentation"><path fill-rule="evenodd" d="M13.798 10.456 10 6.657l-3.798 3.799L4 8.805V13h12V8.805l-2.202 1.65zM18 5v8a2 2 0 0 1-2 2H4a2.002 2.002 0 0 1-2-2V5l4 3 4-4 4 4 4-3z" clip-rule="evenodd"></path></svg>
        </button>
        <button class="nav-icon-button" aria-label="打开通知">
          <svg width="20" height="20" viewBox="0 0 20 20" focusable="false" aria-hidden="true" role="presentation"><path fill-rule="evenodd" d="M4 3h12l2 4v10H2V7l2-4zm.236 4H8v1a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V7h3.764l-1-2H5.236l-1 2zM16 9h-2.17A3.001 3.001 0 0 1 11 11H9a3.001 3.001 0 0 1-2.83-2H4v6h12V9z" clip-rule="evenodd"></path></svg>
        </button>
        <button class="nav-icon-button" aria-label="悄悄话">
          <svg width="20" height="20" viewBox="0 0 20 20" focusable="false" aria-hidden="true" role="presentation"><path fill-rule="evenodd" d="M7.828 13 10 15.172 12.172 13H15V5H5v8h2.828zM10 18l-3-3H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2l-3 3z" clip-rule="evenodd"></path></svg>
        </button>
        <button class="nav-icon-button" aria-label="购买呼币">
          <svg width="20" height="20" viewBox="0 0 20 20" aria-hidden="true" role="presentation"><path fill-rule="evenodd" d="m3 12 7-10 7 10-7 6-7-6zm2.678-.338L10 5.487l4.322 6.173-.85.728L10 11l-3.473 1.39-.849-.729z" clip-rule="evenodd"></path></svg>
        </button>
        <button class="nav-icon-button" aria-label="免费体验无广告观赏">
          <svg width="20" height="20" viewBox="0 0 20 20" focusable="false" aria-hidden="true" role="presentation"><path d="M10.114 9.622 11 7 7.175 9.323a.382.382 0 0 0 .013.65l.698.405L7 13l3.825-2.323a.382.382 0 0 0-.012-.65l-.699-.405z"></path><path fill-rule="evenodd" d="M18 7h-2V4H2v12h14v-3h2V7zm-4-1v3h2v2h-2v3H4V6h10z" clip-rule="evenodd"></path></svg>
        </button>
        
        <button class="nav-user-avatar-button" aria-expanded="false" aria-label="用户菜单">
          <div class="user-avatar-wrapper">
            <img class="user-avatar-img" alt="用户头像" src="/user_avatar.webp" style="object-fit: cover;">
          </div>
        </button>
      </div>
    </header>

    <div id="main-content-wrapper">
      <div id="stream-and-info-container">
        <div id="stream-display-viewport">
          <div id="stream-display-area">
            <!-- --- 核心修改点 (3): 添加 data-darkreader-ignore --- -->
            <div id="live2d-display" data-darkreader-ignore></div>
            <div id="neuro-static-avatar-container">
              <img id="neuro-static-avatar" src="/neurosama.png" alt="Neuro-Sama Static Avatar" />
            </div>
            <div id="neuro-caption"></div>
            <div id="startup-video-overlay">
              <video id="startup-video" src="/neuro_start.mp4" playsinline muted></video>
            </div>
          </div>
          <button id="show-chat-button" class="video-overlay-chat-button" aria-label="展开聊天">
              <svg width="20" height="20" viewBox="0 0 20 20" aria-hidden="true" role="presentation"><path d="M16 16V4h2v12h-2zM6 9l2.501-2.5-1.5-1.5-5 5 5 5 1.5-1.5-2.5-2.5h8V9H6z"></path></svg>
          </button>
        </div>
        <div id="stream-info">
            <div class="streamer-avatar-column">
                <div class="streamer-avatar-wrapper">
                    <img id="streamer-avatar" src="/avatar.webp" alt="Streamer Avatar" />
                    <div class="live-indicator-rect">
                        <!-- --- 核心修改点 (2): 为 span 添加 ID --- -->
                        <span class="live-text" id="live-indicator-text">LIVE</span>
                    </div>
                </div>
            </div>
            <div class="stream-details-column">
                <div class="stream-info-row top-row">
                    <div class="streamer-name-section">
                        <h1 id="streamer-nickname">vedal987</h1>
                        <div class="verified-badge">
                            <svg width="16" height="16" viewBox="0 0 16 16" aria-label="已验证的合作伙伴"><path fill-rule="evenodd" d="M12.5 3.5 8 2 3.5 3.5 2 8l1.5 4.5L8 14l4.5-1.5L14 8l-1.5-4.5ZM7 11l4.5-4.5L10 5 7 8 5.5 6.5 4 8l3 3Z" clip-rule="evenodd"></path></svg>
                        </div>
                    </div>
                    <div class="action-buttons-section">
                        <button class="twitch-button follow-button">
                            <svg width="20px" height="20px" version="1.1" viewBox="0 0 20 20" x="0px" y="0px" class="ScSvg-sc-1hrsqw6-1 dzvvut"><path d="M9.171 4.171A4 4 0 0 0 6.343 3H6a4 4 0 0 0-4 4v.343a4 4 0 0 0 1.172 2.829L10 17l6.828-6.828A4 4 0 0 0 18 7.343V7a4 4 0 0 0-4-4h-.343a4 4 0 0 0-2.829 1.172L10 5l-.829-.829z" fill-rule="evenodd"></path></svg>
                            <span>关注</span>
                        </button>
                        <button class="twitch-button subscribe-button">
                            <svg width="20" height="20" viewBox="0 0 20 20" aria-hidden="true"><path fill-rule="evenodd" d="M11.456 8.255 10 5.125l-1.456 3.13-3.49.485 2.552 2.516-.616 3.485L10 13.064l3.01 1.677-.616-3.485 2.553-2.516-3.491-.485zM7.19 6.424l-4.2.583c-.932.13-1.318 1.209-.664 1.853l3.128 3.083-.755 4.272c-.163.92.876 1.603 1.722 1.132L10 15.354l3.579 1.993c.846.47 1.885-.212 1.722-1.132l-.755-4.272 3.128-3.083c.654-.644.268-1.723-.664-1.853l-4.2-.583-1.754-3.77c-.406-.872-1.706-.872-2.112 0L7.19 6.424z" clip-rule="evenodd"></path></svg>
                            <span>订阅</span>
                            <svg width="20" height="20" viewBox="0 0 20 20"><path d="M14.5 6.5 10 11 5.5 6.5 4 8l6 6 6-6-1.5-1.5z"></path></svg>
                        </button>
                    </div>
                </div>
                <div class="stream-info-row mid-row">
                    <h2 id="stream-title-full">neuro stream</h2>
                    <div class="stream-stats-section">
                        <div class="viewer-count">
                            <svg width="20" height="20" viewBox="0 0 20 20" aria-hidden="true"><path fill-rule="evenodd" d="M5 7a5 5 0 1 1 6.192 4.857A2 2 0 0 0 13 13h1a3 3 0 0 1 3 3v2h-2v-2a1 1 0 0 0-1-1h-1a3.99 3.99 0 0 1-3-1.354A3.99 3.99 0 0 1 7 15H6a1 1 0 0 0-1 1v2H3v-2a3 3 0 0 1 3-3h1a2 2 0 0 0 1.808-1.143A5.002 5.002 0 0 1 5 7zm5 3a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" clip-rule="evenodd"></path></svg>
                            <strong>11,290</strong>
                            <span>观众</span>
                        </div>
                        <div class="stream-duration">
                            <span class="duration-text" id="stream-duration-text">00:00:00</span>
                            <span>已开播</span>
                        </div>
                    </div>
                </div>
                <div class="stream-info-row bottom-row">
                    <a href="#" class="stream-category">谈天说地</a>
                    <div class="stream-tags">
                    </div>
                </div>
            </div>
        </div>
      </div>

      <!-- 右侧聊天侧边栏 -->
      <div id="chat-sidebar" class="chat-sidebar">
        <!-- 顶部收缩按钮和聊天标题 -->
        <div class="chat-sidebar-header">
          <h2 class="chat-title">直播聊天</h2>
          <button id="toggle-chat-button" class="chat-toggle-button" aria-label="重叠聊天">
            <svg width="20" height="20" viewBox="0 0 20 20" aria-hidden="true" role="presentation"><path d="M4 16V4H2v12h2zm9-1-1.5-1.5L14 11H6V9h8l-2.5-2.5L13 5l5 5-5 5z"></path></svg>
          </button>
        </div>
        
        <!-- 聊天消息显示区 -->
        <div id="chat-messages" class="messages-display"></div>
        
        <!-- 聊天输入区 -->
        <div class="chat-input-area">
          <div class="chat-input-toolbar">
            <!-- 模拟的徽章和表情按钮 -->
            <button class="chat-toolbar-button" aria-label="聊天室身份">
              <img alt="订阅者徽章" class="chat-badge-icon" src="https://assets.twitch.tv/assets/light-11f485845b62bbd59fe8.svg">
            </button>
            <button class="chat-toolbar-button" aria-label="欢呼">
              <svg width="20" height="20" viewBox="0 0 20 20" aria-hidden="true" role="presentation"><path d="M14 4V2h-2v2h2z"></path><path fill-rule="evenodd" d="M10.293 8.293 16 14 4 18l-2-2L6 4l2.879 2.879A2.99 2.99 0 0 1 11 6h1v2h-1a.997.997 0 0 0-.707.293zm-3.419-.59-.643 1.93 2.67 4.625 2.254-.751-2.08-3.604-2.201-2.2zM4.498 14.83l.887-2.662 1.58 2.735-2.033.677-.434-.75z" clip-rule="evenodd"></path><path d="M16 5V4h2v1a3 3 0 0 1-3 3h-1V6h1a1 1 0 0 0 1-1zm2 5v2h-2v-2h2z"></path></svg>
            </button>
            <button class="chat-toolbar-button" aria-label="表情符号选择器">
              <svg width="20" height="20" viewBox="0 0 20 20" focusable="false" aria-hidden="true" role="presentation"><g><path d="M7 11a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm7-1a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-4 4a2 2 0 0 0 2-2H8a2 2 0 0 0 2 2z"></path><path d="M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0zm-2 0a6 6 0 1 1-12 0 6 6 0 0 1 12 0z" fill-rule="evenodd"></path></g></svg>
            </button>
          </div>
          <input type="text" id="chat-input" placeholder="发送消息" />
          <div class="chat-send-area">
             <div class="chat-points-display">
                <svg width="20" height="20" viewBox="0 0 20 20"><path fill-rule="evenodd" d="m3 12 7-10 7 10-7 6-7-6zm2.678-.338L10 5.487l4.322 6.173-.85.728L10 11l-3.473 1.39-.849-.729z" clip-rule="evenodd"></path></svg>
                <span class="points-value">0</span>
                <!-- 频道点数 logo 路径已更新 -->
                <img class="channel-points-icon" src="/avatar.webp" alt="频道点数">
                <span class="points-value">0</span>
             </div>
             <button id="send-button" class="chat-send-button">聊天</button>
          </div>
        </div>
      </div>
    </div>
    <div id="settings-modal" class="settings-modal-container hidden">
      <div id="settings-modal-overlay" class="modal-overlay"></div>
      <div class="modal-content">
        <header class="modal-header">
          <h2>设置</h2>
          <button id="settings-close-button" class="modal-close-button">&times;</button>
        </header>
        <main class="modal-body">
          <div class="setting-item">
            <label for="username-setting-input">用户名</label>
            <input type="text" id="username-setting-input" class="modal-input" placeholder="输入你的聊天昵称">
          </div>
          <div class="setting-item avatar-setting">
            <label>头像</label>
            <div class="avatar-preview-container">
              <img id="avatar-setting-preview" src="/avatar.webp" alt="Avatar Preview" class="avatar-preview">
              <input type="file" id="avatar-setting-upload" accept="image/*" class="avatar-upload-input">
              <button id="avatar-upload-button" class="twitch-button">上传图片</button>
            </div>
          </div>
          <div class="setting-item">
            <label for="backend-url-input">后端地址</label>
            <input type="text" id="backend-url-input" class="modal-input" placeholder="例如：ws://127.0.0.1:8000">
          </div>
        </main>
        <footer class="modal-footer">
          <button id="settings-save-button" class="twitch-button subscribe-button">保存并重连</button>
        </footer>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>