/* src/style.css */

/* 定义 Twitch 常用颜色变量 */
:root {
  --twitch-purple: #9147FF;
  --twitch-dark-bg: #18181B;
  --twitch-chat-bg: #0E0E10;
  --twitch-text-color: #EFEFF1;
  --twitch-secondary-text-color: #A0A0A0;
  --twitch-border-color: #3A3A3D;

  --sidebar-width: 340px; /* 聊天侧边栏的宽度 */
  --header-height: 50px; /* Twitch 页眉高度 */
  --transition-duration: 0.3s; /* 过渡动画时间 */

  --neuro-shadow-color: #32003C; /* Neuro 字幕阴影色 */
}

/* 自定义字体 */
@font-face {
  font-family: 'First Coffee';
  src: url('/fonts/first-coffee.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

body {
  font-family: 'Inter', Arial, sans-serif; /* Twitch 常用字体,没有则回退 Arial */
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column; /* 垂直布局：页眉在顶,主内容在下 */
  min-height: 100vh; /* 允许页面内容撑开并滚动 */
  background-color: var(--twitch-dark-bg); /* body 纯色背景 */
  color: var(--twitch-text-color);
}

/* === Twitch 页眉 === */
#twitch-header {
  height: var(--header-height);
  background-color: var(--twitch-chat-bg);
  display: flex;
  align-items: center;
  padding: 0 20px;
  border-bottom: 1px solid var(--twitch-border-color);
  flex-shrink: 0;
  z-index: 100;
}

#twitch-header .logo {
  font-weight: bold;
  font-size: 1.4em;
  color: var(--twitch-purple);
  margin-right: auto;
}

#twitch-header .nav-links a {
  color: var(--twitch-text-color);
  text-decoration: none;
  margin-left: 20px;
  font-weight: 500;
  transition: color 0.2s;
}

#twitch-header .nav-links a:hover {
  color: var(--twitch-purple);
}

/* === 主内容区域：直播画面 + 聊天室 === */
#main-content-wrapper {
  flex-grow: 1; /* 占据页眉下方所有剩余空间 */
  display: flex; /* 横向布局：直播画面在左,聊天室在右 */
  overflow-y: auto; /* 允许主内容区垂直滚动 */
  overflow-x: hidden; /* 防止横向滚动条 */
  position: relative; /* 用于可能的内部定位 */
}

/* 左侧：直播画面和信息容器 */
#stream-and-info-container {
  flex-grow: 1; /* 占据大部分空间 */
  display: flex;
  flex-direction: column; /* 垂直布局：画面在顶,信息在下 */
  padding: 0; /* 移除 padding，让画面紧贴边缘 */
}

/* 直播画面容器 (保持 16:9 比例) */
#stream-display-area {
  width: 100%;
  position: relative; /* 用于内部绝对定位的 Live2D 和字幕 */
  aspect-ratio: 16 / 9; /* 保持 16:9 比例 */
  background-color: #000; /* 黑色背景,当 Live2D 未加载时显示 */
  overflow: hidden; /* 隐藏 Live2D 可能溢出的部分 */
  border-radius: 0; /* 移除圆角 */
  box-shadow: none; /* 移除阴影 */
  flex-shrink: 0; /* 确保它不会被压缩 */
}

/* Live2D 占位符 */
#live2d-display {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  pointer-events: none;
  /* background.webp 仅用于 Live2D 画面背景 */
  background-image: url('/background.webp');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

/* Neuro 字幕显示区域 (位于直播画面之上) */
#neuro-caption {
  position: absolute;
  bottom: 5%;
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 960px;
  padding: 15px 25px;
  border-radius: 10px;
  text-align: center;
  font-size: 2.5em;
  font-weight: bold;
  opacity: 0;
  pointer-events: none;
  z-index: 10;
  color: white;
  transition: opacity 0.5s ease-in-out;
  text-shadow:
    0 0 4px var(--neuro-shadow-color),
    0 0 4px var(--neuro-shadow-color),
    0 0 4px var(--neuro-shadow-color);
  font-family: 'First Coffee', cursive;
}

#neuro-caption.show {
    opacity: 1;
}

/* 直播信息区域 */
#stream-info {
  display: flex;
  align-items: center;
  padding: 20px; /* 添加内边距 */
  border-bottom: 1px solid var(--twitch-border-color);
  margin-bottom: 0; /* 移除 margin-bottom */
}

#streamer-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  margin-right: 15px;
  border: 2px solid var(--twitch-purple);
  flex-shrink: 0;
}

.stream-details {
  flex-grow: 1;
}

.stream-details h1 {
  margin: 0;
  font-size: 1.8em;
  color: var(--twitch-text-color);
  line-height: 1.2;
}

.stream-details p {
  margin: 5px 0 0;
  font-size: 1em;
}

#streamer-nickname {
  color: var(--twitch-secondary-text-color);
  text-decoration: none;
  transition: color 0.2s;
}

#streamer-nickname:hover {
  color: var(--twitch-purple);
  text-decoration: underline;
}


/* === 右侧聊天边栏 === */
.chat-sidebar {
  width: var(--sidebar-width);
  background-color: var(--twitch-chat-bg);
  /* height: 100%; */ /* *** 修复：不再需要固定高度，让它自动填充剩余空间 *** */
  flex-shrink: 0;
  display: flex;
  flex-direction: column; /* 垂直布局，内容从上到下 */
  border-left: 1px solid var(--twitch-border-color);
  z-index: 50;
  /* 移除所有与折叠相关的定位和动画 */
}

/* 聊天内容区域 (在侧边栏内部) */
.chat-content {
  flex-grow: 1; /* 占据侧边栏剩余空间 */
  display: flex;
  flex-direction: column; /* *** 修复：让 messages-display 和 chat-input-area 垂直堆叠 *** */
  padding: 15px;
  overflow: hidden; /* 防止内容溢出 */
}

.chat-header {
  padding-bottom: 10px;
  margin-bottom: 15px;
  border-bottom: 1px solid var(--twitch-border-color);
  /* 修复：对齐方式，确保垂直居中 */
  display: flex;
  justify-content: center; /* 标题居中 */
  align-items: center; /* 垂直居中 */
  position: relative; /* 如果以后要加其他元素可以定位 */
}
.chat-header h2 {
  margin: 0;
  font-size: 1em; /* 顶栏字号调小 */
  color: var(--twitch-text-color);
  flex-grow: 1;
  text-align: center; /* 确保标题本身也居中 */
}

/* 修复：移除 sidebar-toggle-button 的样式，因为它已经不存在了 */
/* .sidebar-toggle-button { ... } */
/* .chat-sidebar.collapsed .sidebar-toggle-button { ... } */
/* .chat-sidebar:not(.collapsed) + .sidebar-toggle-button { ... } */
/* .chat-sidebar.collapsed + .sidebar-toggle-button { ... } */


/* 消息显示区域 (聊天内容无背景，用户名随机颜色) */
.messages-display {
  flex-grow: 1; /* *** 修复：让消息区域占据所有可用垂直空间 *** */
  overflow-y: auto;
  padding-right: 10px;
  margin-bottom: 15px; /* 仍然需要与输入框的间距 */
  scrollbar-width: thin;
  scrollbar-color: #666 #333;
}
.messages-display::-webkit-scrollbar {
  width: 8px;
}
.messages-display::-webkit-scrollbar-track {
  background: #333;
  border-radius: 4px;
}
.messages-display::-webkit-scrollbar-thumb {
  background-color: #666;
  border-radius: 4px;
}

/* 单条消息样式 - 移除背景色，调整间距 */
.message {
  padding: 4px 0;
  margin-bottom: 4px;
  border-radius: 0;
  max-width: 100%;
  word-wrap: break-word;
  color: var(--twitch-text-color);
  text-align: left;
}

.message .username {
  font-weight: bold;
  margin-right: 5px;
}

/* 输入区域 */
.chat-input-area {
  display: flex;
  gap: 10px;
  flex-shrink: 0; /* 确保输入区域不会被压缩 */
  /* *** 修复：确保发送栏位于底部 *** */
  margin-top: auto; /* 推到 flex 容器的底部 */
}

#chat-input {
  flex-grow: 1;
  padding: 10px 15px;
  border: 1px solid var(--twitch-border-color);
  border-radius: 4px; /* 文本框圆角减少 */
  background-color: #333;
  color: var(--twitch-text-color);
  font-size: 1em;
  outline: none;
}
#chat-input::placeholder {
  color: var(--twitch-secondary-text-color);
}
#chat-input:focus {
  border-color: var(--twitch-purple);
}

#send-button {
  padding: 10px 15px; /* 发送按钮内边距调整，以适应图标 */
  background-color: var(--twitch-purple);
  color: white;
  border: none;
  border-radius: 4px; /* 发送按钮圆角减少 */
  cursor: pointer;
  font-size: 1.2em; /* 增大图标大小 */
  font-weight: bold; /* 确保 > 符号明显 */
  transition: background-color 0.2s;
}

#send-button:hover:not(:disabled) {
  background-color: #7728FF;
}

#send-button:disabled {
  background-color: #555;
  cursor: not-allowed;
}
